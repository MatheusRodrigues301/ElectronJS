<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <title>FarolSign</title>
  <script src="frontend.js"></script>
  <style type="text/css">
    html,
    body {
      margin: 0;
      height: 100%;
      overflow: hidden;
    }

    img {
      min-height: 100%;
      min-width: 100%;
      height: auto;
      width: auto;
      position: absolute;
      top: -100%;
      bottom: -100%;
      left: -100%;
      right: -100%;
      margin: auto;
    }

    video {
      position: fixed;
      right: 0;
      bottom: 0;
      min-width: 100%;
      min-height: 100%;
      width: auto;
      height: auto;
      z-index: -100;
      background-size: cover;
    }

    iframe {
      display: block;
      border: none;
      height: 100vh;
      width: 100vw;
      overflow: hidden;
    }
  </style>
</head>

<body>
</body>
<script>
  var $ = require('jquery');
  let path = require('path')
  let read = require('read-file-utf8')
  let timeline = JSON.parse(read(__dirname + '/timeline.json'))

  // var i = 0;
  // setInterval(time, function () {
  //   console.log(i);
  //   i++;
  // }, time * 1000);

  function getExt(filename) {
    var ext = filename.split('.').pop();
    if (ext == filename) return "";
    return ext;
  }

  function teste() {
    console.log('função')
  }

  // function timeoutFunction() {
  //   console.log("incio");
  //   for (var i = 0; i < timeline.length; i++) {
  //     var fileExt = timeline[i].file.split('.').pop();
  //     // let fileExt = getExt(timeline[i].file).toLowerCase()
  //     (function (i) {
  //       setTimeout(function () {
  //         $("body").empty();
  //         if (fileExt === 'jpg' || fileExt === 'jpeg') {
  //           $("body").append("<img src='" + timeline[i].file + "'>").html()
  //         } else if (fileExt === 'mp4') {
  //           $("body").append("<video autoplay><source src='" + timeline[i].file + "' type='video/mp4'></video>").html()
  //         } else if (fileExt === 'html') {
  //           $("body").append("<iframe src='" + timeline[i].file + "' frameborder=0></iframe>").html()
  //         }
  //         console.log("este é " + timeline[i].file + " " + timeline[i].time);
  //       }, timeline[i].time * 1000);
  //     })(i);
  //   };
  // }
  // timeoutFunction();

  function timeoutFunction() {
    console.log("incio");
    for (var i = 0; i < 5; i++) {
      (function (i) {
        setTimeout(function () {
          console.log("este é " + i);
        }, 3000 * i);
      })(i);
    };
  }

  function timeoutFunction() {

    $("body").append("<p>Inicio</p>").html()
    for (var i = 0; i < timeline.length; i++) {

      (function (i) {
        setTimeout(function () {

          console.log(timeline[i].file)
          /* if (timeline[i].file.includes('jpg')) {
            // $("body").empty();
            console.log('entrou imagem')
            // $("body").append("<img src='" + timeline[i].file + "'>").html()
          }

          else if (timeline[i].file.includes('mp4')) {
            console.log('entrou video')
            // $("body").empty();
            // $("body").append("<video autoplay><source src='" + timeline[i].file + "' type='video/mp4'></video>").html()
          }
          else {
            // $("body").empty();
            console.log('entrou iframe')
            // $("body").append("<iframe src='" + timeline[i].file + "' frameborder=0></iframe>").html()
          } */


        }, 3000);
      })(i);
    };
  }

  timeoutFunction();

  // timeline.forEach((item) => {
  //   let ms = item.time * 1000;
  //   console.log(item.file + " " + ms)
  //   let fileExt = getExt(item.file).toLowerCase()

  //   console.log(fileExt)
  //   if (fileExt === 'jpg' || fileExt === 'jpeg') {
  //     $("body").empty();
  //     $("body").append("<img src='" + item.file + "'>").html()
  //   } else if (fileExt === 'mp4') {
  //     $("body").empty();
  //     $("body").append("<video autoplay><source src='" + item.file + "' type='video/mp4'></video>").html()
  //   } else if (fileExt === 'html') {
  //     $("body").empty();
  //     $("body").append("<iframe src='" + item.file + "' frameborder=0></iframe>").html()
  //   }
  // })

  // function getExt(filename) {
  //   var ext = filename.split('.').pop();
  //   if (ext == filename) return "";
  //   return ext;
  // }
    //   console.log(timeline)
</script>

</html>